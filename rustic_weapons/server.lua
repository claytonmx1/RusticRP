ESX = nil

TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)


--------------------- Weapons

ESX.RegisterUsableItem('WEAPON_ADVANCEDRIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_ADVANCEDRIFLE')
end)

ESX.RegisterUsableItem('WEAPON_APPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_APPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_ASSAULTRIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_ASSAULTRIFLE')
end)

ESX.RegisterUsableItem('WEAPON_ASSAULTSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_ASSAULTSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_ASSAULTSMG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_ASSAULTSMG')
end)

ESX.RegisterUsableItem('WEAPON_AUTOSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_AUTOSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_BALL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BALL')
end)

ESX.RegisterUsableItem('WEAPON_BAT', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BAT')
end)

ESX.RegisterUsableItem('WEAPON_BATTLEAXE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BATTLEAXE')
end)

ESX.RegisterUsableItem('WEAPON_BOTTLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BOTTLE')
end)

ESX.RegisterUsableItem('WEAPON_BULLPUPRIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BULLPUPRIFLE')
end)

ESX.RegisterUsableItem('WEAPON_BULLPUPSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BULLPUPSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_BZGAS', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_BZGAS')
end)

ESX.RegisterUsableItem('WEAPON_CARBINERIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_CARBINERIFLE')
end)

ESX.RegisterUsableItem('WEAPON_COMBATMG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_COMBATMG')
end)

ESX.RegisterUsableItem('WEAPON_COMBATPDW', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_COMBATPDW')
end)

ESX.RegisterUsableItem('WEAPON_COMBATPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_COMBATPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_COMPACTLAUNCHER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_COMPACTLAUNCHER')
end)

ESX.RegisterUsableItem('WEAPON_COMPACTRIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_COMPACTRIFLE')
end)

ESX.RegisterUsableItem('WEAPON_CROWBAR', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_CROWBAR')
end)

ESX.RegisterUsableItem('WEAPON_DAGGER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_DAGGER')
end)

ESX.RegisterUsableItem('WEAPON_DBSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_DBSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_DOUBLEACTION', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_DOUBLEACTION')
end)

ESX.RegisterUsableItem('WEAPON_FIREEXTINGUISHER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_FIREEXTINGUISHER')
end)

ESX.RegisterUsableItem('WEAPON_FIREWORK', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_FIREWORK')
end)

ESX.RegisterUsableItem('WEAPON_FLARE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_FLARE')
end)

ESX.RegisterUsableItem('WEAPON_FLAREGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_FLAREGUN')
end)

ESX.RegisterUsableItem('WEAPON_FLASHLIGHT', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_FLASHLIGHT')
end)

ESX.RegisterUsableItem('WEAPON_GARBAGEBAG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_GARBAGEBAG')
end)

ESX.RegisterUsableItem('WEAPON_GOLFCLUB', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_GOLFCLUB')
end)

ESX.RegisterUsableItem('WEAPON_GRENADE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_GRENADE')
end)

ESX.RegisterUsableItem('WEAPON_GRENADELAUNCHER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_GRENADELAUNCHER')
end)

ESX.RegisterUsableItem('WEAPON_GUSENBERG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_GUSENBERG')
end)

ESX.RegisterUsableItem('WEAPON_HAMMER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HAMMER')
end)

ESX.RegisterUsableItem('WEAPON_HANDCUFFS', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HANDCUFFS')
end)

ESX.RegisterUsableItem('WEAPON_HATCHET', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HATCHET')
end)

ESX.RegisterUsableItem('WEAPON_HEAVYPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HEAVYPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_HEAVYSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HEAVYSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_HEAVYSNIPER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HEAVYSNIPER')
end)

ESX.RegisterUsableItem('WEAPON_HOMINGLAUNCHER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_HOMINGLAUNCHER')
end)

ESX.RegisterUsableItem('WEAPON_KNIFE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_KNIFE')
end)

ESX.RegisterUsableItem('WEAPON_KNUCKLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_KNUCKLE')
end)

ESX.RegisterUsableItem('WEAPON_MACHETE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MACHETE')
end)

ESX.RegisterUsableItem('WEAPON_MACHINEPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MACHINEPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_MARKSMANPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MARKSMANPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_MARKSMANRIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MARKSMANRIFLE')
end)

ESX.RegisterUsableItem('WEAPON_MG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MG')
end)

ESX.RegisterUsableItem('WEAPON_MICROSMG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MICROSMG')
end)

ESX.RegisterUsableItem('WEAPON_MINIGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MINIGUN')
end)

ESX.RegisterUsableItem('WEAPON_MINISMG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MINISMG')
end)

ESX.RegisterUsableItem('WEAPON_MOLOTOV', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MOLOTOV')
end)

ESX.RegisterUsableItem('WEAPON_MUSKET', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_MUSKET')
end)

ESX.RegisterUsableItem('WEAPON_NIGHTSTICK', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_NIGHTSTICK')
end)

ESX.RegisterUsableItem('WEAPON_PETROLCAN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_PETROLCAN')
end)

ESX.RegisterUsableItem('WEAPON_PIPEBOMB', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_PIPEBOMB')
end)

ESX.RegisterUsableItem('WEAPON_PISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_PISTOL')
end)

ESX.RegisterUsableItem('WEAPON_PISTOL50', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_PISTOL50')
end)

ESX.RegisterUsableItem('WEAPON_POOLCUE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_POOLCUE')
end)

ESX.RegisterUsableItem('WEAPON_PROXMINE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_PROXMINE')
end)

ESX.RegisterUsableItem('WEAPON_PUMPSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_PUMPSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_RAILGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_RAILGUN')
end)

ESX.RegisterUsableItem('WEAPON_REVOLVER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_REVOLVER')
end)

ESX.RegisterUsableItem('WEAPON_RPG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_RPG')
end)

ESX.RegisterUsableItem('WEAPON_SAWNOFFSHOTGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SAWNOFFSHOTGUN')
end)

ESX.RegisterUsableItem('WEAPON_SMG', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SMG')
end)

ESX.RegisterUsableItem('WEAPON_SMOKEGRENADE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SMOKEGRENADE')
end)

ESX.RegisterUsableItem('WEAPON_SNIPERRIFLE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SNIPERRIFLE')
end)

ESX.RegisterUsableItem('WEAPON_SNOWBALL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SNOWBALL')
end)

ESX.RegisterUsableItem('WEAPON_SNSPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SNSPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_SPECIALCARBINE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SPECIALCARBINE')
end)

ESX.RegisterUsableItem('WEAPON_STICKYBOMB', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_STICKYBOMB')
end)

ESX.RegisterUsableItem('WEAPON_STINGER', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_STINGER')
end)

ESX.RegisterUsableItem('WEAPON_STUNGUN', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_STUNGUN')
end)

ESX.RegisterUsableItem('WEAPON_SWITCHBLADE', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_SWITCHBLADE')
end)

ESX.RegisterUsableItem('WEAPON_VINTAGEPISTOL', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_VINTAGEPISTOL')
end)

ESX.RegisterUsableItem('WEAPON_WRENCH', function(source)
    TriggerClientEvent('rico_weapons:verifyWeapon', source, 'WEAPON_WRENCH')
end)



--------------------- Accessories


ESX.RegisterUsableItem('suppressor', function( source )
    local xPlayer  = ESX.GetPlayerFromId(source)
    TriggerClientEvent('rico_weapons:component', source, 'suppressor')
end)
 
ESX.RegisterUsableItem('flashlight', function( source )
    TriggerClientEvent('rico_weapons:component', source, 'flashlight')
end)
 
ESX.RegisterUsableItem('grip', function(source)
    TriggerClientEvent('rico_weapons:component', source, 'grip')
end)

ESX.RegisterUsableItem('scope', function(source)
    TriggerClientEvent('rico_weapons:component', source, 'scope')
end)
 
ESX.RegisterUsableItem('yusuf', function(source)
    TriggerClientEvent('rico_weapons:component', source, 'yusuf')
end)

ESX.RegisterUsableItem('extendedclip', function(source)
    TriggerClientEvent('rico_weapons:component', source, 'extendedclip')
end)



--------------------- Ammo



ESX.RegisterUsableItem('ammo_45acp', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_45acp')
end)

ESX.RegisterUsableItem('ammo_9mm', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_9mm')
end)

ESX.RegisterUsableItem('ammo_gauge12', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_gauge12')
end)

ESX.RegisterUsableItem('ammo_556', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_556')
end)

ESX.RegisterUsableItem('ammo_762', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_762')
end)

ESX.RegisterUsableItem('ammo_308', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_308')
end)

ESX.RegisterUsableItem('rocket', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'rocket')
end)

ESX.RegisterUsableItem('firework', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'firework')
end)

ESX.RegisterUsableItem('ammo_40x46', function(source)
    TriggerClientEvent('rico_weapons:verifyAmmo', source, 'ammo_40x46')
end)



--------------------- Boxes




ESX.RegisterUsableItem('box_45acp', function(source)
    local xPlayer = ESX.GetPlayerFromId(source)
    
    if Config.BoxGiveAmmoItem then
        xPlayer.removeInventoryItem('box_45acp', 1)
        xPlayer.addInventoryItem('ammo_45acp', Config.BoxPistolAmmoAmount)
    else
        TriggerClientEvent('rico_weapons:usarbox', source, 'box_45acp')
    end
end)

ESX.RegisterUsableItem('box_9mm', function(source)
    local xPlayer = ESX.GetPlayerFromId(source)
    
    if Config.BoxGiveAmmoItem then
        xPlayer.removeInventoryItem('box_9mm', 1)
        xPlayer.addInventoryItem('ammo_9mm', Config.BoxSMGAmmoAmount)
    else
        TriggerClientEvent('rico_weapons:usarbox', source, 'box_9mm')
    end
end)

ESX.RegisterUsableItem('box_gauge12', function(source)
    local xPlayer = ESX.GetPlayerFromId(source)
    
    if Config.BoxGiveAmmoItem then
        xPlayer.removeInventoryItem('box_gauge12', 1)
        xPlayer.addInventoryItem('ammo_gauge12', Config.BoxShotgunAmmoAmount)
    else
        TriggerClientEvent('rico_weapons:usarbox', source, 'box_gauge12')
    end
end)

ESX.RegisterUsableItem('box_556', function(source)
    local xPlayer = ESX.GetPlayerFromId(source)
    
    if Config.BoxGiveAmmoItem then
        xPlayer.removeInventoryItem('box_556', 1)
        xPlayer.addInventoryItem('ammo_556', Config.BoxRifleAmmoAmount)
    else
        TriggerClientEvent('rico_weapons:usarbox', source, 'box_556')
    end
end)

ESX.RegisterUsableItem('box_762', function(source)
    local xPlayer = ESX.GetPlayerFromId(source)
    
    if Config.BoxGiveAmmoItem then
        xPlayer.removeInventoryItem('box_762', 1)
        xPlayer.addInventoryItem('ammo_762', Config.BoxRifleAmmoAmount)
    else
        TriggerClientEvent('rico_weapons:usarbox', source, 'box_762')
    end
end)

ESX.RegisterUsableItem('box_308', function(source)
    local xPlayer = ESX.GetPlayerFromId(source)
    
    if Config.BoxGiveAmmoItem then
        xPlayer.removeInventoryItem('box_308', 1)
        xPlayer.addInventoryItem('ammo_308', Config.BoxSniperAmmoAmount)
    else
        TriggerClientEvent('rico_weapons:usarbox', source, 'box_308')
    end
end)


RegisterNetEvent('weapons:carregar', function(ammo, amount)
  local xPlayer = ESX.GetPlayerFromId(source)
  xPlayer.removeInventoryItem(ammo, amount)
end)



--------------------- Others



RegisterNetEvent('weapons:saveWeapon', function(arma, ammoamount, ammoType)
	local xPlayer = ESX.GetPlayerFromId(source)

	xPlayer.removeWeapon(arma)
 	xPlayer.addInventoryItem(arma, 1)
    if ammoamount > 0 then
        xPlayer.addInventoryItem(ammoType, ammoamount)
    end
end)

RegisterNetEvent('weapons:equipWeapon', function(arma)
  local xPlayer = ESX.GetPlayerFromId(source)

  xPlayer.removeInventoryItem(arma, 1)
  xPlayer.addWeapon(arma, 1)
end)

ESX.RegisterServerCallback('weapons:getItemCount', function(source, cb, item)
    local xPlayer = ESX.GetPlayerFromId(source)
    local result = 0
    
    for key, value in ipairs(xPlayer.inventory) do
        if value.name == item then
            result = value.count
        end
    end
    cb(result)
end)

RegisterNetEvent('weapons:giveItem', function(item, amount)
  local xPlayer = ESX.GetPlayerFromId(source)

  xPlayer.addInventoryItem(item, tonumber(amount))
end)

RegisterNetEvent('weapons:removeItem', function(item, amount)
  local xPlayer = ESX.GetPlayerFromId(source)

  xPlayer.removeInventoryItem(item, amount)
end)